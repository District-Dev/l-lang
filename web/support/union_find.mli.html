<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
            "http://www.w3.org/TR/REC-html40/loose.dtd">
<HTML>
<HEAD>
<TITLE>union_find.mli</TITLE>

<META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<META name="GENERATOR" content="hevea 1.10">
<STYLE type="text/css">
.li-itemize{margin:1ex 0ex;}
.li-enumerate{margin:1ex 0ex;}
.dd-description{margin:0ex 0ex 1ex 4ex;}
.dt-description{margin:0ex;}
.toc{list-style:none;}
.thefootnotes{text-align:left;margin:0ex;}
.dt-thefootnotes{margin:0em;}
.dd-thefootnotes{margin:0em 0em 0em 2em;}
.footnoterule{margin:1em auto 1em 0px;width:50%;}
.caption{padding-left:2ex; padding-right:2ex; margin-left:auto; margin-right:auto}
.title{margin:2ex auto;text-align:center}
.center{text-align:center;margin-left:auto;margin-right:auto;}
.flushleft{text-align:left;margin-left:0ex;margin-right:auto;}
.flushright{text-align:right;margin-left:auto;margin-right:0ex;}
DIV TABLE{margin-left:inherit;margin-right:inherit;}
PRE{text-align:left;margin-left:0ex;margin-right:auto;}
BLOCKQUOTE{margin-left:4ex;margin-right:4ex;text-align:left;}
TD P{margin:0px;}
.boxed{border:1px solid black}
.textboxed{border:1px solid black}
.vbar{border:none;width:2px;background-color:black;}
.hbar{border:none;height:2px;width:100%;background-color:black;}
.hfill{border:none;height:1px;width:200%;background-color:black;}
.vdisplay{border-collapse:separate;border-spacing:2px;width:auto; empty-cells:show; border:2px solid red;}
.vdcell{white-space:nowrap;padding:0px;width:auto; border:2px solid green;}
.display{border-collapse:separate;border-spacing:2px;width:auto; border:none;}
.dcell{white-space:nowrap;padding:0px;width:auto; border:none;}
.dcenter{margin:0ex auto;}
.vdcenter{border:solid #FF8000 2px; margin:0ex auto;}
.minipage{text-align:left; margin-left:0em; margin-right:auto;}
.marginpar{border:solid thin black; width:20%; text-align:left;}
.marginparleft{float:left; margin-left:0ex; margin-right:1ex;}
.marginparright{float:right; margin-left:1ex; margin-right:0ex;}
.theorem{text-align:left;margin:1ex auto 1ex 0ex;}
.part{margin:2ex auto;text-align:center}
</STYLE>
</HEAD>
<BODY >
<!--HEVEA command line is: /usr/bin/hevea -I /usr/share/texmf/tex/latex/misc ocamlweb.sty union_find.mli.tex -->
<!--CUT DEF section 1 --><!--TOC section Interface for module Union_find-->
<H2 CLASS="section"><!--SEC ANCHOR -->Interface for module Union_find</H2><!--SEC END --><P>
<B>1.</B> 
<A NAME="src/support/union_find.mli:0"></A><A NAME="src/support/union_find.mli:42"></A>A union-find data structure maintains a partition of elements into
disjoint sets.</P><P>It allows to add new elements in new partitions, perform the union
of two partitions, and retrieve the partition in which is an
element. Moreover it allows to attach a description to a partition,
which is generally the point of using such a structure.</P><P>This module has side effects: adding an element to a union-find
data structure changes that element, and the union operation merges
the partitions destructively. This make it easy to use this module
incorrectly. To that end, a number of protections (using types and
dynamic checks) are set that detect such incorrect uses of the
module. </P><P>Note on the name: there are other data structures that maintain
disjoint sets with other operations, such as partition refinement,
so "union-find" is a more accurate name for this data structure
than "disjoint set". 
<BR><A NAME="src/support/union_find.mli:969"></A>
<div style="border: solid 1px gray; background:#eeeeee;
            margin: 0.5em 1em 0.5em 1em;
            padding: 0.5em 1em 0.5em 1em;
            font-family:mono"><code>

<span style="color: #0000ff; font-weight: bold;">module</span> <span style="color: #0000ff; font-weight: bold;">type</span> <span style="color: #228b22; ">S</span> =<BR>
<span style="color: #0000ff; font-weight: bold;">sig</span></P><P></code></div>  
The t type represents the whole union-find data structure. A
partition always belong to some t; elements belong to a t once
there has been a "singleton" operation on them. </P><P>All the functions (except <code>create</code>) take a <code>t</code> argument; in their
safe version this argument is used to checks that other
<code>element</code> and <code>partition</code> arguments indeed belong to the <code>t</code>
argument. 
<BR><A NAME="src/support/union_find.mli:1395"></A>
<div style="border: solid 1px gray; background:#eeeeee;
            margin: 0.5em 1em 0.5em 1em;
            padding: 0.5em 1em 0.5em 1em;
            font-family:mono"><code>
  
<span style="color: #0000ff; font-weight: bold;">type</span> t<BR>  
<span style="color: #0000ff; font-weight: bold;">type</span> partition<BR>  
<span style="color: #0000ff; font-weight: bold;">type</span> element<BR>  
<span style="color: #0000ff; font-weight: bold;">type</span> description</P><P></code></div>  
<code>create()</code> returns a new empty union find data structure. 
<BR><A NAME="src/support/union_find.mli:1522"></A>
<div style="border: solid 1px gray; background:#eeeeee;
            margin: 0.5em 1em 0.5em 1em;
            padding: 0.5em 1em 0.5em 1em;
            font-family:mono"><code>
  
<span style="color: #0000ff; font-weight: bold;">val</span> create : <span style="color: #228b22; ">unit</span> &#X2192; t</P><P></code></div>  
<code>singleton t e d</code> adds a new element <code>e</code> to <code>t</code>, and create and
returns a new partition <code>p</code> in <code>t</code>, such that <code>e</code> is the only
element of <code>p</code>. It also attach the description <code>d</code> to <code>p</code>.</P><P>The safe version checks that <code>e</code> was not previously added to
another union-find data structure (with the same link). 
<BR><A NAME="src/support/union_find.mli:1879"></A>
<div style="border: solid 1px gray; background:#eeeeee;
            margin: 0.5em 1em 0.5em 1em;
            padding: 0.5em 1em 0.5em 1em;
            font-family:mono"><code>
  
<span style="color: #0000ff; font-weight: bold;">val</span> singleton : t &#X2192; element &#X2192; description &#X2192; partition</P><P></code></div>  
<code>find t e</code> returns the partition <code>p</code> of <code>t</code> that contains <code>e</code>. 
<BR><A NAME="src/support/union_find.mli:2010"></A>
<div style="border: solid 1px gray; background:#eeeeee;
            margin: 0.5em 1em 0.5em 1em;
            padding: 0.5em 1em 0.5em 1em;
            font-family:mono"><code>
  
<span style="color: #0000ff; font-weight: bold;">val</span> find : t &#X2192; element &#X2192; partition</P><P></code></div>  
<code>union t p1 p2 d</code> creates a new partition <code>p3</code>, with description
<code>d</code>, that contains the union of all the elements in <code>p1</code> and
<code>p2</code>. The <code>p1</code> and <code>p2</code> arguments are consumed, i.e. must not be
used after they were passed to <code>union</code>. <code>p1</code> and <code>p2</code> must be
different partitions. 
<BR><A NAME="src/support/union_find.mli:2353"></A>
<div style="border: solid 1px gray; background:#eeeeee;
            margin: 0.5em 1em 0.5em 1em;
            padding: 0.5em 1em 0.5em 1em;
            font-family:mono"><code>
  
<span style="color: #0000ff; font-weight: bold;">val</span> union : t &#X2192; partition &#X2192; partition &#X2192; description &#X2192; partition</P><P></code></div>  
<code>description t p</code> returns the description associated to <code>p</code>. 
<BR><A NAME="src/support/union_find.mli:2493"></A>
<div style="border: solid 1px gray; background:#eeeeee;
            margin: 0.5em 1em 0.5em 1em;
            padding: 0.5em 1em 0.5em 1em;
            font-family:mono"><code>
  
<span style="color: #0000ff; font-weight: bold;">val</span> description : t &#X2192; partition &#X2192; description</P><P></code></div>  
<code>description t p</code> changes the description associated to <code>p</code>. 
<BR><A NAME="src/support/union_find.mli:2613"></A>
<div style="border: solid 1px gray; background:#eeeeee;
            margin: 0.5em 1em 0.5em 1em;
            padding: 0.5em 1em 0.5em 1em;
            font-family:mono"><code>
  
<span style="color: #0000ff; font-weight: bold;">val</span> set_description : t &#X2192; partition &#X2192; description &#X2192; <span style="color: #228b22; ">unit</span><BR>
<span style="color: #0000ff; font-weight: bold;">end</span><BR></code></div><B>2.</B> 
<A NAME="src/support/union_find.mli:2682"></A>We defined two types of "union-find makers": Fast and Safe. Both
propose a <code>link</code> type, and each element of a union-find structure
must be "associated" to one different link (generally the link is a
mutable field in the element type). Initially, the link value is
<code>empty_link</code>.</P><P>The <code><span style="color: #228b22; ">Make</span></code> functor, once told how access the link of an element,
returns a module complying to <code><span style="color: #228b22; ">S</span></code>. Below we given an exemple of
usage.</P><P>Note: It is possible for an element to be present in two different
union-find data structures; it must just have different links. </P><P>If the link in an element must be re-used for another union-find
data structure, then it must be set to <code>empty_link</code>, and one must
stop using the union-find data structure that contained the element
(even with other elements). 
<BR><A NAME="src/support/union_find.mli:3488"></A>
<div style="border: solid 1px gray; background:#eeeeee;
            margin: 0.5em 1em 0.5em 1em;
            padding: 0.5em 1em 0.5em 1em;
            font-family:mono"><code>

<span style="color: #0000ff; font-weight: bold;">module</span> <span style="color: #0000ff; font-weight: bold;">type</span> <span style="color: #228b22; ">UNION_FIND</span> = <span style="color: #0000ff; font-weight: bold;">sig</span><BR>  
<span style="color: #0000ff; font-weight: bold;">type</span> (&#X3B1;, &#X3B2;) link<BR>  
<span style="color: #0000ff; font-weight: bold;">val</span> empty_link:(&#X3B1;,&#X3B2;) link</P><P><A NAME="src/support/union_find.mli:3569"></A>  
<span style="color: #0000ff; font-weight: bold;">module</span> <span style="color: #0000ff; font-weight: bold;">type</span> <span style="color: #228b22; ">LINK</span> =<BR>  
<span style="color: #0000ff; font-weight: bold;">sig</span><BR>    
<span style="color: #0000ff; font-weight: bold;">type</span> element<BR>    
<span style="color: #0000ff; font-weight: bold;">type</span> description<BR>    
<span style="color: #0000ff; font-weight: bold;">val</span> get : element &#X2192; (description, element) link<BR>    
<span style="color: #0000ff; font-weight: bold;">val</span> set : element &#X2192; (description, element) link &#X2192; <span style="color: #228b22; ">unit</span><BR>  
<span style="color: #0000ff; font-weight: bold;">end</span></P><P><A NAME="src/support/union_find.mli:3755"></A>  
<span style="color: #0000ff; font-weight: bold;">module</span> <span style="color: #228b22; ">Make</span>(<span style="color: #228b22; ">Link</span> : <span style="color: #228b22; ">LINK</span>):<span style="color: #228b22; ">S</span> <span style="color: #a020f0; ">with</span> <span style="color: #0000ff; font-weight: bold;">type</span> description = <span style="color: #228b22; ">Link.</span>description <span style="color: #0000ff; font-weight: bold;">and</span> <span style="color: #0000ff; font-weight: bold;">type</span> element = <span style="color: #228b22; ">Link.</span>element<BR>
<span style="color: #0000ff; font-weight: bold;">end</span></P><P></code></div>
The difference between the fast and safe version is that safe
performs additional checks. The performance difference is small, so
the Safe version should be prefered. 
<BR><A NAME="src/support/union_find.mli:4041"></A>
<div style="border: solid 1px gray; background:#eeeeee;
            margin: 0.5em 1em 0.5em 1em;
            padding: 0.5em 1em 0.5em 1em;
            font-family:mono"><code>

<span style="color: #0000ff; font-weight: bold;">module</span> <span style="color: #228b22; ">Fast</span>:<span style="color: #228b22; ">UNION_FIND</span></P><P><A NAME="src/support/union_find.mli:4066"></A>
<span style="color: #0000ff; font-weight: bold;">module</span> <span style="color: #228b22; ">Safe</span>:<span style="color: #228b22; ">UNION_FIND</span><BR></code></div><B>3.</B> 
<A NAME="src/support/union_find.mli:4094"></A>Exemple of usage:</P><P><code><span style="color: #0000ff; font-weight: bold;">type</span> test = { x:<span style="color: #228b22; ">int</span>; <span style="color: #a020f0; ">mutable</span> z:(<span style="color: #228b22; ">string</span>, test) <span style="color: #228b22; ">Union_find</span>.<span style="color: #228b22; ">Safe</span>.link };;</code></P><P><code><span style="color: #0000ff; font-weight: bold;">module</span> <span style="color: #228b22; ">Test</span> = <span style="color: #0000ff; font-weight: bold;">struct</span>
 <span style="color: #0000ff; font-weight: bold;">type</span> description = <span style="color: #228b22; ">string</span>
 <span style="color: #0000ff; font-weight: bold;">type</span> element = test
 <span style="color: #0000ff; font-weight: bold;">let</span> get_link t = t.z
 <span style="color: #0000ff; font-weight: bold;">let</span> set_link t z = t.z &#X2190; z
 <span style="color: #0000ff; font-weight: bold;">end</span></code></P><P><code><span style="color: #0000ff; font-weight: bold;">module</span> <span style="color: #228b22; ">A</span> = <span style="color: #228b22; ">Union_find</span>.<span style="color: #228b22; ">Safe</span>.<span style="color: #228b22; ">Make</span>(<span style="color: #228b22; ">Test</span>)</code></P><P><code><span style="color: #0000ff; font-weight: bold;">let</span> uf = <span style="color: #228b22; ">A</span>.create() <span style="color: #0000ff; font-weight: bold;">in</span>
 <span style="color: #0000ff; font-weight: bold;">let</span> elt1 = {x=1; z=<span style="color: #228b22; ">Safe</span>.empty_link} <span style="color: #0000ff; font-weight: bold;">in</span>
 <span style="color: #0000ff; font-weight: bold;">let</span> part1 = <span style="color: #228b22; ">A</span>.singleton t elt1 <span style="color: #8b2252; ">"1"</span> <span style="color: #0000ff; font-weight: bold;">in</span>
 <span style="color: #a020f0; ">assert</span>(<span style="color: #228b22; ">A</span>.description t (<span style="color: #228b22; ">A</span>.find t elt1) = <span style="color: #8b2252; ">"1"</span>)</code> 
<BR></P><!--CUT END -->
<!--HTMLFOOT-->
<!--ENDHTML-->
<!--FOOTER-->
<HR SIZE=2><BLOCKQUOTE CLASS="quote"><EM>This document was translated from L<sup>A</sup>T<sub>E</sub>X by
</EM><A HREF="http://hevea.inria.fr/index.html"><EM>H</EM><EM><FONT SIZE=2><sup>E</sup></FONT></EM><EM>V</EM><EM><FONT SIZE=2><sup>E</sup></FONT></EM><EM>A</EM></A><EM>.</EM></BLOCKQUOTE></BODY>
</HTML>
